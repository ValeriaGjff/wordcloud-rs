<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã ‚Äî –æ–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤</title>
  <style>
    :root { --pad: 40px; }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: #f3f4f6;
      margin: 0; padding: var(--pad);
      text-align: center; color:#111827;
    }
    h1 { margin: 0 0 10px; font-weight: 800; }
    p  { margin: 0 0 24px; color:#4b5563; }
    .card {
      width: min(1000px, 92vw);
      margin: 0 auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 12px 28px rgba(0,0,0,.10);
      padding: 18px;
    }
    .holder {
      width: 100%; aspect-ratio: 3 / 2; /* 3:2 */
      display: grid; place-items: center;
    }
    object, img {
      width: 100%; height: 100%;
      border-radius: 16px;
    }
    .hint { color:#6b7280; font-size: 14px; margin-top: 12px; }
    .error { color:#b91c1c; }
  </style>
</head>
<body>
  <h1>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</h1>
  <p>–û–±–ª–∞–∫–æ —Ç–µ–≥–æ–≤ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (SVG). –ï—Å–ª–∏ SVG –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –±—É–¥–µ—Ç PNG.</p>

  <div class="card">
    <div class="holder" id="holder">
      <!-- –°—é–¥–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è <object> (SVG) –∏–ª–∏ <img> (PNG) -->
    </div>
    <div class="hint" id="status">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>
  </div>

  <script>
    // üëâ –£–∫–∞–∂–∏ –∑–¥–µ—Å—å —Å–≤–æ–∏ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (–ª–µ–∂–∞—Ç—å –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è):
    const CANDIDATES_SVG = ["cloud.svg", "image.svg", "wordcloud.svg"];
    const CANDIDATES_PNG = ["image.png", "cloud.png", "wordcloud.png"];

    const holder = document.getElementById('holder');
    const status = document.getElementById('status');

    function tryLoad(src, isSvg) {
      return new Promise((resolve, reject) => {
        if (isSvg) {
          const obj = document.createElement('object');
          obj.type = "image/svg+xml";
          obj.data = "./" + src;
          obj.style.display = 'none';
          obj.onload = () => resolve({el: obj, src});
          obj.onerror = () => reject(src);
          // —Ç–∞–π–º–∞—É—Ç –Ω–∞ —Å–ª—É—á–∞–π —Ç–∏—Ö–∏—Ö –æ—à–∏–±–æ–∫
          setTimeout(() => reject(src), 3000);
          holder.appendChild(obj);
        } else {
          const img = new Image();
          img.src = "./" + src;
          img.style.display = 'none';
          img.onload = () => resolve({el: img, src});
          img.onerror = () => reject(src);
          // —Ç–∞–π–º–∞—É—Ç
          setTimeout(() => reject(src), 3000);
        }
      });
    }

    async function loadBest() {
      status.textContent = "wordcloud_topic1.csv";
      // –ü—Ä–æ–±—É–µ–º SVG –ø–æ —Å–ø–∏—Å–∫—É –∏–º—ë–Ω
      for (const name of CANDIDATES_SVG) {
        try {
          const {el, src} = await tryLoad(name, true);
          el.style.display = '';
          holder.innerHTML = '';
          holder.appendChild(el);
          status.textContent = "–ü–æ–∫–∞–∑–∞–Ω SVG: " + src;
          return;
        } catch(e) { /* –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º */ }
      }
      status.textContent = "SVG –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–±—É–µ–º PNG‚Ä¶";
      // –§–æ–ª–±—ç–∫ –Ω–∞ PNG
      for (const name of CANDIDATES_PNG) {
        try {
          const {el, src} = await tryLoad(name, false);
          el.style.display = '';
          holder.innerHTML = '';
          holder.appendChild(el);
          status.textContent = "–ü–æ–∫–∞–∑–∞–Ω PNG: " + src;
          return;
        } catch(e) { /* –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º */ }
      }
      status.innerHTML = '<span class="error">–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª. –ü–æ–ª–æ–∂–∏ –≤ –∫–æ—Ä–µ–Ω—å –æ–¥–∏–Ω –∏–∑: '
        + [...CANDIDATES_SVG, ...CANDIDATES_PNG].join(', ') + '</span>';
    }

    loadBest();
  </script>
</body>
</html>
